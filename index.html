<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./style.css">
    <title>React Sports Game</title>
  </head>
<body>
    <!-- include an element for ReactDOM to attach our React-generated elements to -->
    <div id="root"></div>

    <!-- include React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <!-- include Babel standalone so we can process JSX in React.createElement stuff -->
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  

    <!-- include our JS+JSX for the React Appliccation -->
<script type="text/babel">
class Team extends React.Component{
   constructor(props){
     super(props)

     this.state = {
       shots: 0,
       score: 0
     }
    this.shotSound = new Audio('./assets/Back+Board.wav')
    this.scoreSound = new Audio('./assets/Swish+2.wav')
   }
   shotHandler = () => {
   let score = this.state.score
   this.shotSound.play()
  

     if(Math.random() > 0.5){
        score += 1

        setTimeout(() => {
          this.scoreSound.play()
        }, 500  
        )
       
     }
     this.setState((state, props) => ({
          shots: state.shots + 1,
          score
     }))
   }
   render(){
     let shotPercentageDiv
     if(this.state.shots){
     const shotPercentage = Math.round((this.state.score / this.state.shots )* 100)
      shotPercentageDiv = (
        <div><strong>Shooting %: {shotPercentage}</strong>
              </div>
      

      )
     }
     return(
       <div className="Team">
        <h2>{this.props.name}</h2>
        <div className="identity">
          <img src={this.props.logo} alt='this.props.name'/>
          </div>

          <div><strong>Shots:</strong>{this.state.shots}
            </div>

          <div><strong>Score:</strong>{this.state.score}
            </div>

           {shotPercentageDiv}

            <button onClick={this.shotHandler}>Shoot!</button>
        </div>
     )
   }
}


function Game(props){
    return(
      <div className="Game">
        <h1>Welcome to {props.venue}</h1>
        <div className="stats">
    <div>
      <Team 
       name= {props.visitingTeam.name}
       logo= {props.visitingTeam.logoSrc}
       />

      <div className="versus">
        <h1>VS</h1>
        </div>


       <Team 
       name= {props.homeTeam.name}
       logo= {props.homeTeam.logoSrc}
       />
    
    </div >
        </div>
        </div>
    )
}





// An App component under which all other components will be added
function App (props) {
  const pinks = {
    name: 'The Pinks',
    logoSrc: 'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.4-EmoY80t2WIelnieLEg2AHaHa%26pid%3DApi&f=1'
  }
  const blues = {
    name:'The Blues',
    logoSrc:'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.pqmcQv1OOgv6jWIGA7LeNAHaHa%26pid%3DApi&f=1'
  }

  const reds = {
    name:'The Reds',
    logoSrc: 'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.Dd9audx0fmvxCvfzFbl64wAAAA%26pid%3DApi&f=1'
  }

  const greens = {
    name:'The Greens',
    logoSrc:'https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.spnXNUao1lS7xhunXdzfLQHaHa%26pid%3DApi&f=1'
  }




  return (
    <div className="App">
      <Game venue = 'Sandie Arena'
      homeTeam={pinks}
      visitingTeam={blues}
      />
      <Game venue = 'Shar Palace' 
      homeTeam={reds}
      visitingTeam={greens}
      />
    </div>
  ) 

  }

// Render the App
ReactDOM.render(
  <App />,
  document.getElementById('root')
)
</script>
</body>
</html>
